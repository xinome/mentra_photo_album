---
title: "Django REST frameworkã®serializersã‚’ä½¿ã£ãŸå¤–éƒ¨ã‚­ãƒ¼ãƒ¢ãƒ‡ãƒ«ã®å‚ç…§"
emoji: "ğŸ‘Œ"
type: "tech"
topics:
  - "django"
  - "javascript"
  - "python"
  - "react"
  - "drf"
published: true
published_at: "2025-07-08 19:00"
---

:::message
ã“ã®è¨˜äº‹ã¯ Qiita ã«2024å¹´2æœˆã«æŠ•ç¨¿ã—ãŸå†…å®¹ã‚’ã€æœ€æ–°ã®æ§‹æˆã«åŸºã¥ã„ã¦å†ç·¨é›†ã—ãŸã‚‚ã®ã§ã™ã€‚
:::

## æ¦‚è¦

Django REST frameworkã® `serializers` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã„ã€dictå‹ã§å–å¾—ã•ã‚ŒãŸdjango-adminã®ãƒ‡ãƒ¼ã‚¿ã‚’JSONã«å¤‰æ›ã—ãŸçŠ¶æ…‹ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«é€£æºã™ã‚‹ä»•çµ„ã¿ã‚’å®Ÿè£…ã—ãŸã®ã§ã™ãŒã€å¤–éƒ¨ã‚­ãƒ¼ã‚’ä½¿ã£ãŸãƒ¢ãƒ‡ãƒ«è¨­è¨ˆã®å ´åˆã¯ã‚‚ã†ä¸€å·¥å¤«å¿…è¦ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸãŸã‚è¨˜è¼‰ã—ã¾ã™ã€‚


### å®Ÿè£…æ©Ÿèƒ½

- [Django REST framework(DRF)](https://www.django-rest-framework.org/)ã®å°å…¥
- å¤–éƒ¨ã‚­ãƒ¼ã‚’ç”¨ã„ãŸãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆã€å®Ÿè£…


| é …ç•ª | è¨˜äº‹ |
| :--- | :--- |
| 1 | [React + Django + CORSã‚’ä½¿ã£ãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ / ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ãƒ‡ãƒ¼ã‚¿é€£æº](https://zenn.dev/xinome/articles/6025914fbe07f3) |
| 2 | [Django ç®¡ç†ç”»é¢ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º](https://zenn.dev/xinome/articles/1dac5d48c25fe7) |
| 3 | [Django REST framework(DRF)ã‚’ä½¿ã£ãŸAPIã‚µãƒ¼ãƒãƒ¼ã¨Reactã¨ã®ãƒ‡ãƒ¼ã‚¿é€£æº](https://zenn.dev/xinome/articles/4ddf5b02bac39a) |
| 4 | Django REST frameworkã®serializersã‚’ä½¿ã£ãŸå¤–éƒ¨ã‚­ãƒ¼ãƒ¢ãƒ‡ãƒ«ã®å‚ç…§ï¼ˆæœ¬è¨˜äº‹ï¼‰ |
| 5 | React + Redux / Redux Toolkitã‚’ä½¿ã£ãŸéåŒæœŸé€šä¿¡ã®æ¤œè¨¼ï¼ˆå¾Œæ—¥å…¬é–‹ï¼‰ |
| 6 | APIã‚’ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã€ŒPostmanã€ã‚’ä½¿ã£ãŸDjangoã¨ã®CRUDæ©Ÿèƒ½å®Ÿè£…(è¨­è¨ˆç·¨)ï¼ˆå¾Œæ—¥å…¬é–‹ï¼‰ |
| 7 | APIã‚’ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã€ŒPostmanã€ã‚’ä½¿ã£ãŸDjangoã¨ã®CRUDæ©Ÿèƒ½å®Ÿè£…(å®Ÿè£…ç·¨)ï¼ˆå¾Œæ—¥å…¬é–‹ï¼‰ |

### å‚è€ƒæ–‡çŒ®

https://qiita.com/kamontia/items/8d3fdecadeb436431967

https://docs.djangoproject.com/ja/4.2/topics/db/examples/



## ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

ä»Šå›ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚‚ã®ã‚’ãƒ¡ã‚¤ãƒ³ã«æŠœç²‹

- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰(Python / Django)

```
[Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ]
â”œâ”€â”€ [Djangoãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ_meta]
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ asgi.py
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ [Djangoã‚¢ãƒ—ãƒª]
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ apps.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ tests.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â”œâ”€â”€ serializers.py
â”‚   â””â”€â”€ views.py
â”œâ”€â”€ db.sqlite3
â””â”€â”€ manage.py
```



## å®Ÿè£…æ–¹æ³•

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

ã¾ãšã¯models.pyã§ãƒ¢ãƒ‡ãƒ«ã®è¨­è¨ˆã‚’ã—ã¾ã™ã€‚

```python:app/models.py
# å…¨ã¦ã®ãƒ¢ãƒ‡ãƒ«ã«å…±é€šã™ã‚‹é …ç›®ã‚’å®šç¾©ã™ã‚‹
class BaseMeta(models.Model):
  created_at = models.DateTimeField(auto_now_add=True)
  updated_at = models.DateTimeField(auto_now=True)

  class Meta:
    abstract = True  # æŠ½è±¡ã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®šç¾©ã™ã‚‹


class TopicsCategory(BaseMeta):
  id = models.AutoField(primary_key=True)
  category_name = models.CharField(max_length=100)

  class Meta:
    db_table = 'topics_category'
    verbose_name_plural = 'ãƒˆãƒ”ãƒƒã‚¯ã‚¹ã‚«ãƒ†ã‚´ãƒª'

  def __str__(self):
    return self.category_name


class ProjectTopics(BaseMeta):
  id = models.AutoField(primary_key=True)
  date = models.DateField()
  content = models.CharField(max_length=1000)
  category = models.ForeignKey(TopicsCategory, on_delete=models.PROTECT, null=True, default=1)

  class Meta:
    db_table = 'project_topics'
    verbose_name_plural = 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒˆãƒ”ãƒƒã‚¯ä¸€è¦§'

  def __str__(self):
    return self.content
```

`ProjectTopics` ãŒæŠ½è±¡ã‚¯ãƒ©ã‚¹ `BaseMeta` åŠã³å¤–éƒ¨ã‚­ãƒ¼ã®å‚ç…§å…ƒã¨ãªã‚‹ `TopicsCategory` ã‚’èª­ã¿è¾¼ã‚€æ§‹æˆã¨ãªã£ã¦ã„ã¾ã™ã€‚
å¤–éƒ¨ã‚­ãƒ¼ã®æ§‹æˆã«ã¯

- å¤šå¯¾å¤š (many-to-many) é–¢ä¿‚
- å¤šå¯¾ä¸€ (many-to-one) é–¢ä¿‚
- ä¸€å¯¾ä¸€ (one-to-one) é–¢ä¿‚

ã®ç¨®é¡ãŒã‚ã‚‹ã®ã§ã™ãŒã€ä»Šå›ã¯ [ForeignKey](https://docs.djangoproject.com/ja/4.2/topics/db/examples/many_to_one/)ã‚’ä½¿ã£ãŸå¤šå¯¾ä¸€ (many-to-one)ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

ForeignKeyã¯[on_deleteã‚ªãƒ—ã‚·ãƒ§ãƒ³](https://docs.djangoproject.com/ja/4.2/ref/models/fields/#django.db.models.ForeignKey.on_delete)ãŒå¿…è¦ãªä»–ã€nullå€¤ã®è¨±å®¹ã‚„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®æŒ‡å®šç­‰ãŒå¯èƒ½ã§ã™ã€‚

- TopicsCategoryã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ

```
id	category_name
1	ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
2	ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª
3	ã‚¹ã‚«ã‚¦ãƒˆ
```

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«å…¥ã‚‹å‰ã«ã€views.pyã§å–å¾—ãƒ‡ãƒ¼ã‚¿ã®æ§‹æˆã‚’ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚

```python:app/views.py
from django.shortcuts import render
from django.http import JsonResponse
from rest_framework import viewsets

# Model, Serializerã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹
from .serializers import ProjectTopicsSerializer
from .models import ProjectTopics
  :
def project_topics(request):
  # data = [
  #   {
  #     "id": 1,
  #     "date": "2022-10-01",
  #     "content": "ã€ãƒ†ã‚¹ãƒˆã€‘[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ]ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå1ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã—ãŸã€‚",
  #     "category": {
  #         "id": 1,
  #         "category_name": ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ,
  #     },
  #   },
  # ]

  queryset = ProjectTopics.objects.all()

  for ProjectTopic in queryset:

    print("ProjectTopic: ", ProjectTopic)
    print("ProjectTopic.category: ", ProjectTopic.category)
    print("ProjectTopic.category.id: ", ProjectTopic.category.id)
    print("ProjectTopic.category.category_name: ", ProjectTopic.category.category_name)

  serializer_class = ProjectTopicsSerializer(queryset, many=True)
  data = serializer_class.data

  for item in data:
    print("item: ", item)

  return JsonResponse(data, safe=False)

```

æœ¬æ¥ã¯ã‚³ãƒ¡ãƒ³ãƒˆå†…ã«è¨˜è¼‰ã—ãŸå½¢å¼ã§å–å¾—ã—ãŸã„ã®ã§ã™ãŒã€ `print` æ§‹æ–‡ã®ä»•æ§˜ãªã®ã‹å¤šéšå±¤ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾å–å¾—ã™ã‚‹ã“ã¨ãŒé›£ã—ã„ã‚ˆã†ã§ã™ã€‚

```bash
ProjectTopic:  ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå1ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã—ãŸã€‚
ProjectTopic.category:  ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
ProjectTopic.category.id:  1
ProjectTopic.category.category_name:  ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

item:  OrderedDict([('id', 1), ('date', '2022-10-01'), ('content', 'ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå1ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã—ãŸã€‚'), ('category', OrderedDict([('id', 1), ('category_name', 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ'), ('created_at', '2024-01-15T14:50:49.590256+09:00'), ('updated_at', '2024-01-15T14:50:49.590341+09:00')])), ('created_at', '2024-01-10T18:06:19.942784+09:00'), ('updated_at', '2024-01-15T16:43:19.660215+09:00')])
```

ã“ã®ã‚ˆã†ã«serializerã‚’é€šã—ãŸå¾Œã¯Dictå‹ã§å–å¾—ã§ãã¦ã„ã¾ã™ãŒã€querysetã®çŠ¶æ…‹ã ã¨ç‰¹å®šã®1é …ç›®ã®ã¿å‡ºåŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã“ã“ã§ãƒ‡ãƒ¼ã‚¿å½¢å¼ãŒå´©ã‚Œã‚‹ã¨å¾Œã€…ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¸ã®é€£æºã‚„CRUDç®¡ç†ã«å½±éŸ¿ã‚’åŠã¼ã™ãŸã‚ã€ãã‚Œã‚’å›é¿ã™ã‚‹ãŸã‚ã«serializers.pyã‚’æ”¹ä¿®ã—ã¾ã™ã€‚

```python:app/serializers.py
from rest_framework import serializers
from .models import ProjectTopics, TopicsCategory

class TopicsCategorySerializer(serializers.ModelSerializer):
  class Meta:
    model = TopicsCategory
    fields = ('id', 'category_name', 'created_at', 'updated_at')

class ProjectTopicsSerializer(serializers.ModelSerializer):
  # å¤–éƒ¨ã‚­ãƒ¼ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’å–å¾—ã™ã‚‹
  category = TopicsCategorySerializer()
  
  class Meta:
    model = ProjectTopics
    fields = ('id', 'date', 'content', 'category', 'created_at', 'updated_at')
```

å¤–éƒ¨ã‚­ãƒ¼ç”¨ã®serializer `TopicsCategorySerializer` ã‚’æ–°ã—ãå®šç¾©ã—ã€èª­ã¿è¾¼ã‚€å´ã® `ProjectTopicsSerializer` ã§é …ç›®åã‚’æŒ‡å®šã—ãŸå¾Œã€fieldsã§ãã®åå‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚
ï¼ˆã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä»»æ„ã®é …ç›®åã«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã®ã‚ˆã†ï¼‰

ã“ã®æŒ‡å®šã«ã‚ˆã‚Šå¤–éƒ¨ã‚­ãƒ¼ã® `category` ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ã€Œidã€ã€Œcategory_nameã€ãŒå…¥ã‚Œå­ã§å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚


### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

```javascript:/src/BaseApp.js
<div className='section-wrapper-contents'>
    :
  {filteredProjectList.map((item) => (
    <dl key={item.id}>
      <dt>{item.date}</dt>
      <dd>
        <span className="tag_category">
          {item.category.id}
          {item.category.category_name}
        </span>
        {item.content}
      </dd>
    </dl>
  ))}
</div>
```

ä¸€ä¾‹ã¨ã—ã¦ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰å–å¾—ã—ãŸJSONå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’ `filteredProjectList` ã¨ã—ã¦å‡ºåŠ›ã—ã¦ã„ã¾ã™ã€‚
æ§‹æˆãŒå¤‰ã‚ã‚‰ãšãã®ã¾ã¾é€£æºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚





