> GitHub Issue: #15

## 📝 概要

アルバム編集機能の不具合を修正し、ユーザー体験を改善しました。アイキャッチ画像の表示・保存の問題を修正し、編集完了後のフィードバックを追加しました。

## ✅ 実装内容

### 1. アルバム編集画面のアイキャッチ画像表示の修正

* 既存のアイキャッチ画像が正しく表示されるように修正
* カバー画像取得時のエラーハンドリングを追加
* デフォルト画像への誤った上書きを防止

### 2. アルバム編集時の保存エラーの修正

* アイキャッチ画像保存時の必須フィールド（`uploader_id`、`mime_type`、`bytes`）を追加
* ファイル名の形式を適切な形式に修正
* エラーハンドリングを強化し、詳細なエラーメッセージを表示
* エラー時のファイル削除処理を追加

### 3. アイキャッチ画像とアルバム内画像の分離

* アイキャッチ画像をアルバムの写真一覧から除外
* `cover_photo_id`でフィルタリングして、アイキャッチ画像が写真一覧に表示されないように修正
* 写真アップロード後の再取得時にも除外処理を実装

### 4. 編集完了後のToastメッセージ表示機能の追加

* アルバム編集完了後に「変更しました」という成功メッセージを表示
* URLパラメータを使用してメッセージを制御
* メッセージ表示後、URLパラメータを自動削除（リロード時の再表示を防止）

## 📁 変更ファイル

### 修正

* `src/app/albums/[id]/edit/page.tsx` - カバー画像取得ロジックの改善、保存処理の改善、URLパラメータの追加
* `src/components/AlbumEditor.tsx` - カバー画像表示ロジックの改善
* `src/app/albums/[id]/page.tsx` - 写真取得時のアイキャッチ画像除外処理、Toastメッセージ表示機能

## ✅ 検証項目

* [x] 編集画面で既存のアイキャッチ画像が正しく表示されること
* [x] アイキャッチ画像を変更して保存した際にエラーが発生しないこと
* [x] アイキャッチ画像がアルバムの写真一覧に表示されないこと
* [x] アルバム編集完了後に「変更しました」というToastメッセージが表示されること
* [x] エラーハンドリングが適切に実装されていること
* [x] URLパラメータがメッセージ表示後に削除されること
