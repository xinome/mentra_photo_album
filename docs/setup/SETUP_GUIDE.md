# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## ç’°å¢ƒè¦ä»¶

- **Node.js**: v18.18.0 ä»¥ä¸Šï¼ˆæ¨å¥¨: v20ä»¥ä¸Šï¼‰
- **npm**: v8ä»¥ä¸Š
- **Supabase**: ãƒªãƒ¢ãƒ¼ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¾ãŸã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹

## åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.example`ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦`.env.local`ã‚’ä½œæˆã—ã¾ã™ï¼š

```bash
cp .env.example .env.local
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: ãƒªãƒ¢ãƒ¼ãƒˆSupabaseã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ãƒ»ç¾åœ¨ã®è¨­å®šï¼‰

**æ–¹æ³•2: æœ¬ç•ªç’°å¢ƒã¨åŒã˜Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨**

æœ¬ç•ªç’°å¢ƒã¨åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹ãŸã‚ã€ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒç°¡å˜ã§ã™ã€‚

1. [Supabase](https://supabase.com)ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ > **Settings** > **API**ã‚’é–‹ã
3. ä»¥ä¸‹ã®å€¤ã‚’`.env.local`ã«è¨­å®šï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

**APIã‚­ãƒ¼ã®å–å¾—æ–¹æ³•ï¼š**
- **Project URL**: `https://your-project.supabase.co`
- **anon public key**: `API Settings`ãƒšãƒ¼ã‚¸ã®`anon`ã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼

**æ³¨æ„**: æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã¨å…±æœ‰ã•ã‚Œã‚‹ãŸã‚ã€é–‹ç™ºæ™‚ã¯æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã‚’ä½¿ç”¨

âš ï¸ **æ³¨æ„**: Node.js 18ä»¥ä¸ŠãŒå¿…è¦ã§ã™

1. Supabase CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:
   ```bash
   npm install -g supabase
   ```

2. ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã‚’èµ·å‹•:
   ```bash
   npx supabase start
   ```

3. è¡¨ç¤ºã•ã‚Œã‚‹æƒ…å ±ã‚’`.env.local`ã«è¨­å®š:
   ```env
   NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
   NEXT_PUBLIC_SUPABASE_ANON_KEY=è¡¨ç¤ºã•ã‚ŒãŸanon-key
   ```

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®è¨­å®š

#### ãƒªãƒ¢ãƒ¼ãƒˆSupabaseã®å ´åˆï¼ˆæ¨å¥¨ï¼‰

1. Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ > **SQL Editor**ã‚’é–‹ã
2. **New Query**ã‚’ã‚¯ãƒªãƒƒã‚¯
3. `supabase/sql/complete-setup.sql`ã®å†…å®¹ã‚’**å…¨ã¦**ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ
4. **Run**ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å®Ÿè¡Œ
5. "Success. No rows returned" ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸ

**è©³ç´°ãªæ‰‹é †**: [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](../database/DATABASE_SETUP.md) ã‚’å‚ç…§

#### ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆã®ç¢ºèª

Supabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ > **Table Editor**ã§ä»¥ä¸‹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªï¼š
- âœ… profiles
- âœ… albums
- âœ… photos
- âœ… shares
- âœ… album_members
- âœ… comments
- âœ… photo_tags

#### ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã®å ´åˆï¼ˆæ–¹æ³•1: æœ¬ç•ªç’°å¢ƒã¨åˆ†é›¢ï¼‰

**æ–¹æ³•1: ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã‚’ä½¿ç”¨ã—ã¦æœ¬ç•ªç’°å¢ƒã¨åˆ†é›¢**

ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ç‹¬ç«‹ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã®æ‰‹é †ã§ã™ã€‚

1. **Supabase CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**ï¼ˆåˆå›ã®ã¿ï¼‰
   ```bash
   npm install -g supabase
   ```

2. **ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã®èµ·å‹•**
   ```bash
   npx supabase start
   ```
   èµ·å‹•å¾Œã€ä»¥ä¸‹ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
   - API URL: `http://127.0.0.1:54321`
   - anon key: ï¼ˆè¡¨ç¤ºã•ã‚ŒãŸã‚­ãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ï¼‰

3. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   - ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:54323 ã‚’é–‹ãï¼ˆSupabase Studioï¼‰
   - å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã€ŒSQL Editorã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ã€ŒNew Queryã€ã‚’ã‚¯ãƒªãƒƒã‚¯
   - `supabase/sql/complete-setup.sql`ã®å†…å®¹ã‚’**å…¨ã¦**ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ
   - ã€ŒRunã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å®Ÿè¡Œ
   - "Success. No rows returned" ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸ

4. **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒã‚±ãƒƒãƒˆã®ç¢ºèª**
   - Supabase Studio > Storage ã‚’é–‹ã
   - ã€Œphotosã€ãƒã‚±ãƒƒãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
     ï¼ˆ`complete-setup.sql`ã§è‡ªå‹•ä½œæˆã•ã‚Œã¾ã™ï¼‰

5. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
   `.env.local`ã«ä»¥ä¸‹ã‚’è¨­å®šï¼š
   ```env
   NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
   NEXT_PUBLIC_SUPABASE_ANON_KEY=ãƒ­ãƒ¼ã‚«ãƒ«Supabaseèµ·å‹•æ™‚ã«è¡¨ç¤ºã•ã‚ŒãŸanon-key
   ```

**ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã®ç®¡ç†ã‚³ãƒãƒ³ãƒ‰**:
- èµ·å‹•: `npx supabase start`
- åœæ­¢: `npx supabase stop`
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª: `npx supabase status`
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ: `npx supabase db reset`
- Studioï¼ˆç®¡ç†ç”»é¢ï¼‰: http://localhost:54323

### 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ [http://localhost:3000](http://localhost:3000) ã«ã‚¢ã‚¯ã‚»ã‚¹

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

```
You are using Node.js 16.15.1. For Next.js, Node.js version "^18.18.0 || ^19.8.0 || >= 20.0.0" is required.
```

**è§£æ±ºæ–¹æ³•**: Node.jsã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„

- [nvm](https://github.com/nvm-sh/nvm)ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰:
  ```bash
  nvm install 20
  nvm use 20
  ```

- ã¾ãŸã¯[å…¬å¼ã‚µã‚¤ãƒˆ](https://nodejs.org/)ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### Supabaseæ¥ç¶šã‚¨ãƒ©ãƒ¼

```
ERR_NAME_NOT_RESOLVED
```

**è§£æ±ºæ–¹æ³•**:
1. `.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
2. `NEXT_PUBLIC_SUPABASE_URL`ã¨`NEXT_PUBLIC_SUPABASE_ANON_KEY`ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•: `npm run dev`

### Magic Linké€ä¿¡ã‚¨ãƒ©ãƒ¼

**ç¢ºèªäº‹é …**:
1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èªè¨¼è¨­å®š
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ > **Authentication** > **Providers**
   - Emailãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURLè¨­å®šï¼ˆé‡è¦ï¼ï¼‰
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ > **Authentication** > **URL Configuration**
   - ä»¥ä¸‹ã®URLã‚’è¨±å¯ãƒªã‚¹ãƒˆã«è¿½åŠ ï¼š
     - ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º: `http://localhost:3000/albums`
     - æœ¬ç•ªç’°å¢ƒ: `https://mentra-photo-album.vercel.app/albums`
     - ï¼ˆãã®ä»–ä½¿ç”¨ã™ã‚‹URLãŒã‚ã‚‹å ´åˆã¯è¿½åŠ ï¼‰

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
mentra_photo_album/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”‚   â””â”€â”€ login/         # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ albums/            # ã‚¢ãƒ«ãƒãƒ ä¸€è¦§ãƒ»è©³ç´°
â”‚   â”‚   â”œâ”€â”€ share/             # å…±æœ‰ã‚¢ãƒ«ãƒãƒ 
â”‚   â”‚   â””â”€â”€ demo/              # ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ components/            # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ui/                # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ figma/             # Figmaç”Ÿæˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ types/                 # TypeScriptå‹å®šç¾©
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ config.toml            # Supabaseè¨­å®š
â”‚   â”œâ”€â”€ sql/                   # SQLã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ functions/             # Edge Functions
â”œâ”€â”€ .env.local                 # ç’°å¢ƒå¤‰æ•°ï¼ˆgitignoreï¼‰
â””â”€â”€ .env.example               # ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```

## ä¸»è¦ãªæ©Ÿèƒ½

### å®Ÿè£…æ¸ˆã¿
- âœ… Magic Linkãƒ­ã‚°ã‚¤ãƒ³
- âœ… ã‚¢ãƒ«ãƒãƒ ä¸€è¦§ãƒ»ä½œæˆ
- âœ… ã‚¢ãƒ«ãƒãƒ è©³ç´°è¡¨ç¤º
- âœ… å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆæ—¢å­˜æ©Ÿèƒ½ï¼‰
- âœ… å…±æœ‰ãƒªãƒ³ã‚¯ç”Ÿæˆ

### é–‹ç™ºä¸­
- ğŸš§ ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UIï¼ˆFigmaãƒ‡ã‚¶ã‚¤ãƒ³çµ±åˆï¼‰
- ğŸš§ ã„ã„ã­æ©Ÿèƒ½
- ğŸš§ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š
- ğŸš§ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

## é–‹ç™ºTips

### ãƒ­ãƒ¼ã‚«ãƒ«Supabaseã®ç®¡ç†

```bash
# èµ·å‹•
npx supabase start

# åœæ­¢
npx supabase stop

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
npx supabase status

# Studioï¼ˆç®¡ç†ç”»é¢ï¼‰ã‚’é–‹ã
# http://localhost:54323
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒªã‚»ãƒƒãƒˆ

```bash
npx supabase db reset
```

### Edge Functionã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
npx supabase functions deploy share
```

## å‚è€ƒãƒªãƒ³ã‚¯

- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [shadcn/ui](https://ui.shadcn.com/)
- [Tailwind CSS](https://tailwindcss.com/)

