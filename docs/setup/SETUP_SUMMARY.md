# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã¾ã¨ã‚

## ğŸ“ æ¦‚è¦

SQLã‚¨ãƒ©ãƒ¼ã€Œcolumn "user_id" does not existã€ãŒç™ºç”Ÿã™ã‚‹å•é¡Œã«å¯¾ã—ã¦ã€**æ®µéšçš„ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**ã¨**æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**ã®2ã¤ã®æ–¹æ³•ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚

## ğŸ¯ ã©ã®æ–¹æ³•ã‚’é¸ã¶ã¹ãã‹

### æ–¹æ³•1: æ®µéšçš„ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ¨å¥¨ï¼‰â­

**ã“ã‚“ãªäººã«ãŠã™ã™ã‚**:
- SQLã«æ…£ã‚Œã¦ã„ã‚‹
- ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸæ™‚ã«å¯¾å‡¦ã§ãã‚‹
- æ™‚é–“: ç´„5-10åˆ†

**æ‰‹é †**:
1. `01-tables-only.sql` â†’ ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. `02-rls-policies.sql` â†’ RLSè¨­å®š
3. Storage UIã‹ã‚‰ãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆæ‰‹å‹•ï¼‰

ğŸ‘‰ [README.md](../../README.md#4-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—) ã¾ãŸã¯ [ã‚¯ã‚¤ãƒƒã‚¯ä¿®æ­£ã‚¬ã‚¤ãƒ‰](../development/QUICK_FIX_GUIDE.md)

---

### æ–¹æ³•2: æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆç¢ºå®Ÿï¼‰ğŸ›¡ï¸

**ã“ã‚“ãªäººã«ãŠã™ã™ã‚**:
- SQLã‚¨ãƒ©ãƒ¼ãŒè§£æ±ºã—ãªã„
- UIã‹ã‚‰æ“ä½œã—ãŸã„
- ç¢ºå®Ÿã«å‹•ä½œã•ã›ãŸã„
- æ™‚é–“: ç´„15-20åˆ†

**æ‰‹é †**:
1. SQL Editorã§ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. SQL Editorã§RLSè¨­å®š
3. Storage UIã‹ã‚‰ãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆæ‰‹å‹•ï¼‰
4. Table Editorã‹ã‚‰ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿è¿½åŠ ï¼ˆæ‰‹å‹•ï¼‰

ğŸ‘‰ [MANUAL_SETUP_GUIDE.md](MANUAL_SETUP_GUIDE.md)

---

## ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### SQLã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ®µéšçš„ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ | å®Ÿè¡Œé †åº | å¿…é ˆ |
|---------|------|---------|------|
| `01-tables-only.sql` | ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã®ã¿ | 1ç•ªç›® | âœ… å¿…é ˆ |
| `02-rls-policies.sql` | RLSãƒãƒªã‚·ãƒ¼è¨­å®š | 2ç•ªç›® | âœ… å¿…é ˆ |
| `03-storage.sql` | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®šï¼ˆå‚è€ƒï¼‰ | 3ç•ªç›® | âŒ æ‰‹å‹•æ¨å¥¨ |
| `sample-data.sql` | ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ | æœ€å¾Œ | âŒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ |

### SQLã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆçµ±åˆç‰ˆãƒ»éæ¨å¥¨ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ | çŠ¶æ…‹ |
|---------|------|------|
| `complete-setup.sql` | å…¨ã¦ã‚’ä¸€æ‹¬å®Ÿè¡Œ | âš ï¸ ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å¯èƒ½æ€§ã‚ã‚Š |

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ | å¯¾è±¡èª­è€… |
|---------|------|---------|
| [æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](MANUAL_SETUP_GUIDE.md) | æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é † | ç¢ºå®Ÿã«å‹•ä½œã•ã›ãŸã„äºº |
| [ã‚¯ã‚¤ãƒƒã‚¯ä¿®æ­£ã‚¬ã‚¤ãƒ‰](../development/QUICK_FIX_GUIDE.md) | ã‚¯ã‚¤ãƒƒã‚¯ä¿®æ­£ã‚¬ã‚¤ãƒ‰ | æ®µéšçš„ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ã—ãŸã„äºº |
| [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è©³ç´°ã‚¬ã‚¤ãƒ‰](../database/DATABASE_SETUP.md) | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è©³ç´°ã‚¬ã‚¤ãƒ‰ | è©³ã—ãçŸ¥ã‚ŠãŸã„äºº |
| [ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](../database/TABLE_STRUCTURE.md) | ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ | é–‹ç™ºè€…å‘ã‘ |
| [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](SETUP_GUIDE.md) | ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ | å…¨å“¡ |

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### åˆã‚ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å ´åˆ

1. **ç’°å¢ƒå¤‰æ•°è¨­å®š**
   ```bash
   cp .env.example .env.local
   # .env.local ã‚’ç·¨é›†ã—ã¦ Supabase URL ã¨ API ã‚­ãƒ¼ã‚’è¨­å®š
   ```

2. **æ®µéšçš„ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
   - `01-tables-only.sql` ã‚’å®Ÿè¡Œ
   - `02-rls-policies.sql` ã‚’å®Ÿè¡Œ
   - Storage UI ã‹ã‚‰ `photos` ãƒã‚±ãƒƒãƒˆä½œæˆ

3. **å‹•ä½œç¢ºèª**
   ```bash
   npm run dev
   ```
   - `http://localhost:3000` ã«ã‚¢ã‚¯ã‚»ã‚¹
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šã‚’å®Œäº†
   - ã‚¢ãƒ«ãƒãƒ ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OK âœ…

### ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆ

**ç—‡çŠ¶**: `column "user_id" does not exist`

**å¯¾å‡¦æ³•**:
1. æ®µéšçš„ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è©¦ã™ï¼ˆ[ã‚¯ã‚¤ãƒƒã‚¯ä¿®æ­£ã‚¬ã‚¤ãƒ‰](../development/QUICK_FIX_GUIDE.md)ï¼‰
2. ãã‚Œã§ã‚‚ãƒ€ãƒ¡ãªã‚‰æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ[MANUAL_SETUP_GUIDE.md](MANUAL_SETUP_GUIDE.md)ï¼‰

---

## âœ… ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ­£ã—ãã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼š

### ãƒ†ãƒ¼ãƒ–ãƒ«
- [ ] `profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨
- [ ] `albums` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨
- [ ] `photos` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨
- [ ] `shares` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨
- [ ] `album_members` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨
- [ ] `comments` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨
- [ ] `photo_tags` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨

### RLS
- [ ] ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã§RLSãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹
- [ ] `profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ã«4ã¤ã®ãƒãƒªã‚·ãƒ¼ãŒã‚ã‚‹

### ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- [ ] `photos` ãƒã‚±ãƒƒãƒˆãŒå­˜åœ¨ã™ã‚‹
- [ ] Public bucket ãŒã‚ªãƒ•ã«ãªã£ã¦ã„ã‚‹

### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šãŒä¿å­˜ã§ãã‚‹
- [ ] ã‚¢ãƒ«ãƒãƒ ä¸€è¦§ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æ–°è¦ã‚¢ãƒ«ãƒãƒ ãŒä½œæˆã§ãã‚‹

**ã™ã¹ã¦ãƒã‚§ãƒƒã‚¯ã§ããŸã‚‰å®Œäº†ã§ã™ï¼** ğŸ‰

---

## ğŸ› ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

### å•é¡Œ1: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¿å­˜ã‚¨ãƒ©ãƒ¼

```
ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ
```

**åŸå› **: ãƒ†ãƒ¼ãƒ–ãƒ«ã¾ãŸã¯RLSãŒæœªè¨­å®š

**è§£æ±ºæ–¹æ³•**:
1. Table Editor ã§ `profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
2. å­˜åœ¨ã—ãªã„å ´åˆ: `01-tables-only.sql` ã‚’å®Ÿè¡Œ
3. RLSç¢ºèª: `02-rls-policies.sql` ã‚’å®Ÿè¡Œ

### å•é¡Œ2: ã‚¢ãƒ«ãƒãƒ ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: ãƒ‡ãƒ¼ã‚¿ãŒãªã„ã€ã¾ãŸã¯RLSã§å¼¾ã‹ã‚Œã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:
```sql
-- SQL Editor ã§å®Ÿè¡Œ
SELECT * FROM albums WHERE owner_id = auth.uid();
```
- çµæœãŒç©º: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ 
- ã‚¨ãƒ©ãƒ¼: RLSãƒãƒªã‚·ãƒ¼ã‚’å†è¨­å®š

### å•é¡Œ3: å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼

**åŸå› **: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒã‚±ãƒƒãƒˆãŒæœªä½œæˆ

**è§£æ±ºæ–¹æ³•**:
1. Storage > Create a new bucket
2. Name: `photos`
3. Public: ã‚ªãƒ•

---

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [Supabase Documentation](https://supabase.com/docs)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)
- [Storage](https://supabase.com/docs/guides/storage)

---

## ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãŒå®Œäº†ã—ãŸã‚‰ï¼š

1. âœ¨ å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã‚‹
2. ğŸ”— ã‚¢ãƒ«ãƒãƒ ã‚’å…±æœ‰ã—ã¦ã¿ã‚‹
3. ğŸ‘¥ åˆ¥ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å…±åŒç·¨é›†ã—ã¦ã¿ã‚‹
4. ğŸ¨ [Figmaãƒ‡ã‚¶ã‚¤ãƒ³](https://www.figma.com/design/lPbJ0bzsWg0JfjucWuuoXu/Mantra-Photo-Album)ã¨è¦‹æ¯”ã¹ã‚‹

æ¥½ã—ã‚“ã§ãã ã•ã„ï¼ğŸ“¸âœ¨

